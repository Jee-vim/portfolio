<header>
  <nav>
    <a class="a-none" href="/">Jaenudin</a>
    <button id="theme-toggle" aria-label="Toggle theme">
      <div class="theme-icon"></div>
    </button>
  </nav>
</header>

<script>
  function setupThemeToggle() {
    const btn = document.getElementById("theme-toggle");
    btn?.addEventListener("click", () => {
      const isLight = document.documentElement.classList.toggle("light-mode");
      localStorage.setItem("theme", isLight ? "light" : "dark");
    });
  }

  setupThemeToggle();
  document.addEventListener("astro:after-swap", setupThemeToggle);
</script>

<style>
  nav { 
    display: flex;
    align-items: center;
    justify-content: space-between; 
  }
  
  a {
    font-weight: 500;
  }

  #theme-toggle {
    background: none;
    border: none;
    padding: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .theme-icon {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: var(--foreground-muted);
    border: 2px solid var(--foreground-muted);
    transition: all 0.3s ease;
    position: relative;
  }

  :root.light-mode .theme-icon {
    background: transparent;
    border-color: var(--foreground);
    transform: scale(1.1);
  }

  #theme-toggle:hover .theme-icon {
    border-color: var(--primary);
  }
</style>
